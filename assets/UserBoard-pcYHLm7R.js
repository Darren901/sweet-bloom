import{_ as v,o as c,c as u,b as t,w as C,v as $,n as _,m as g,l as w,a,e as m,f as d,t as k,k as x,F as y,r as l,h as U,p as T,g as N}from"./index-CywCkABC.js";import{T as F}from"./ToastMessages-R6Xi235i.js";import{c as M}from"./cartStore-2MwUBDgE.js";import{m as O}from"./modalMixins-eD7zMzD1.js";import{U as B}from"./UserCouponModal-zdUMg7Wk.js";import{o as I}from"./orderStore-Dg64RHCE.js";import{f as E}from"./favoritesStore-DeNCEM67.js";import"./component-functions-DgVAUczx.js";import"./statusStore-D8qcawhQ.js";const L={props:["error"],data(){return{orderId:""}},computed:{isOrderNotFound(){return this.error}},methods:{search(){this.$emit("search-order",this.orderId),this.orderId=""},cancel(){this.$emit("update:error",!1),this.orderId="",this.hideModal()}},mixins:[O]},V={class:"modal fade",id:"exampleModal",tabindex:"-1",ref:"modal"},q={class:"modal-dialog modal-dialog-centered"},A={class:"modal-content"},D={class:"modal-body"},Y={class:"mb-3"},z={class:"modal-footer"},j=["disabled"];function G(o,s,h,b,n,e){return c(),u("div",V,[t("div",q,[t("div",A,[s[5]||(s[5]=t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},"查詢訂單"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",D,[t("div",Y,[s[3]||(s[3]=t("label",{for:"order",class:"form-label"},"訂單編號",-1)),C(t("input",{type:"email",class:_(["form-control",{"is-invalid":e.isOrderNotFound}]),id:"order",placeholder:"請輸入訂單編號","onUpdate:modelValue":s[0]||(s[0]=r=>n.orderId=r)},null,2),[[$,n.orderId]]),s[4]||(s[4]=t("div",{id:"validationServer05Feedback",class:"invalid-feedback"},"查不到此訂單編號",-1))])]),t("div",z,[t("button",{type:"button",class:"btn btn-secondary text-light",onClick:s[1]||(s[1]=(...r)=>e.cancel&&e.cancel(...r))},"取消"),t("button",{type:"button",class:"btn btn-primary text-light",onClick:s[2]||(s[2]=(...r)=>e.search&&e.search(...r)),disabled:n.orderId===""}," 查詢 ",8,j)])])])],512)}const H=v(L,[["render",G]]),J={data(){return{setShadow:!1,error:!1}},computed:{...g(M,["cart"]),cartCount(){var o,s;return((s=(o=this.cart)==null?void 0:o.carts)==null?void 0:s.length)||0},...g(E,["favorites"]),isFavorite(){return this.favorites.length>0}},methods:{navShadow(){requestAnimationFrame(()=>{this.setShadow=window.scrollY>100})},async searchOrder(o){(await this.getOrder(o)).data.order!==null?(this.$router.push(`/user/checkout/${o}`),this.$refs.orderModal.hideModal(),this.error=!1):this.error=!0},closeMenu(){const o=document.getElementById("navbarNav");o&&o.classList.contains("show")&&document.querySelector(".navbar-toggler").click()},...w(M,["getCart"]),...w(I,["getOrder"])},created(){this.getCart()},mounted(){window.addEventListener("scroll",this.navShadow),this.navShadow()},unmounted(){window.removeEventListener("scroll",this.navShadow)},components:{UserOrderModal:H,UserCouponModal:B}},K={class:"container"},P={class:"collapse navbar-collapse",id:"navbarNav"},Q={class:"navbar-nav ms-auto align-items-center"},R={class:"nav-item"},W={class:"nav-item"},X={class:"nav-item"},Z={class:"nav-item"},ss={class:"nav-item"},ts={key:0,class:"position-absolute start-100 translate-middle badge rounded-pill bg-primary text-light"},es={class:"nav-item"},os={key:0,class:"position-absolute start-100 translate-middle badge rounded-pill bg-primary text-light"};function rs(o,s,h,b,n,e){const r=l("UserOrderModal"),f=l("UserCouponModal"),i=l("router-link");return c(),u(y,null,[a(r,{ref:"orderModal",error:n.error,"onUpdate:error":s[0]||(s[0]=p=>n.error=p),onSearchOrder:e.searchOrder},null,8,["error","onSearchOrder"]),a(f,{ref:"couponModal"},null,512),t("nav",{class:_(["navbar navbar-expand-lg bg-light navbar-light sticky-top",{"nav-shadow":n.setShadow,"navbar-shrink":n.setShadow}])},[t("div",K,[a(i,{class:"navbar-brand text-primary",to:"/user/index",onClick:e.closeMenu},{default:m(()=>s[3]||(s[3]=[d("Sweet Bloom")])),_:1},8,["onClick"]),s[9]||(s[9]=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[t("span",{class:"navbar-toggler-icon"})],-1)),t("div",P,[t("ul",Q,[t("li",R,[a(i,{class:"nav-link",to:"/user/aboutus",onClick:e.closeMenu},{default:m(()=>s[4]||(s[4]=[d("關於我們")])),_:1},8,["onClick"])]),t("li",W,[a(i,{class:"nav-link",to:"/user/products",onClick:e.closeMenu},{default:m(()=>s[5]||(s[5]=[d("所有商品")])),_:1},8,["onClick"])]),t("li",X,[t("button",{class:"nav-link",onClick:s[1]||(s[1]=p=>(this.$refs.couponModal.showModal(),e.closeMenu()))}," 優惠活動 ")]),t("li",Z,[t("button",{class:"nav-link",onClick:s[2]||(s[2]=p=>(this.$refs.orderModal.showModal(),e.closeMenu()))}," 訂單查詢 ")]),t("li",ss,[a(i,{class:"nav-link text-primary position-relative",to:"/user/favorites",onClick:e.closeMenu},{default:m(()=>[t("i",{class:_(e.isFavorite?"bi-heart-fill":"bi-heart ")},null,2),e.isFavorite?(c(),u("span",ts,[d(k(o.favorites.length)+" ",1),s[6]||(s[6]=t("span",{class:"visually-hidden"},"unread messages",-1))])):x("",!0)]),_:1},8,["onClick"])]),t("li",es,[a(i,{class:"nav-link position-relative ms-0 text-primary",to:"/user/cart",onClick:e.closeMenu},{default:m(()=>[s[8]||(s[8]=t("i",{class:"bi bi-cart fs-5"},null,-1)),e.cartCount>0?(c(),u("span",os,[d(k(e.cartCount)+" ",1),s[7]||(s[7]=t("span",{class:"visually-hidden"},"unread messages",-1))])):x("",!0)]),_:1},8,["onClick"])])])])])],2)],64)}const as=v(J,[["render",rs]]),ns={},ls={class:"bg-primary text-light py-4"},is={class:"container"},ds={class:"text-center mb-0"};function cs(o,s,h,b,n,e){const r=l("router-link");return c(),u("div",ls,[t("div",is,[s[2]||(s[2]=U('<div class="row"><div class="col-md-4"><h5>聯絡資訊</h5><p>電話：(02) 2345-6789</p><p>地址：台北市中山區幸福路123號</p><p>Email：SweetBloom@gmail.com</p></div><div class="col-md-4"><h5>營業時間</h5><p>週一至週五：10:00-21:00</p><p>週六至週日：11:00-22:00</p></div><div class="col-md-4"><h5>追蹤我們</h5><div class="d-flex gap-4"><a href="#" class="text-light"><i class="bi bi-facebook fs-3"></i></a><a href="#" class="text-light"><i class="bi bi-instagram fs-3"></i></a><a href="#" class="text-light"><i class="bi bi-line fs-3"></i></a></div></div></div><hr class="my-4">',2)),t("p",ds,[s[1]||(s[1]=d(" © 2024 甜．綻 甜點工作坊 版權所有 ")),a(r,{class:"float-end text-light text-decoration-none",to:"/login"},{default:m(()=>s[0]||(s[0]=[d("管理員登入")])),_:1})])])])}const us=v(ns,[["render",cs]]),ms={name:"ScrollToTop",data(){return{showButton:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.showButton=window.scrollY>500},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}},ps={class:"scroll-to-top"};function vs(o,s,h,b,n,e){return c(),u("div",ps,[C(t("button",{type:"button",class:"btn btn-secondary text-light px-4 py-3 rounded-3",onClick:s[0]||(s[0]=(...r)=>e.scrollToTop&&e.scrollToTop(...r))},s[1]||(s[1]=[t("i",{class:"bi bi-arrow-up"},null,-1)]),512),[[T,n.showButton]])])}const hs=v(ms,[["render",vs]]),bs={components:{ToastMessages:F,UserNavbar:as,UserFooter:us,UserScrollTop:hs},provide(){return{emitter:N}},created(){}},fs={class:"position-relative"};function _s(o,s,h,b,n,e){const r=l("UserNavbar"),f=l("ToastMessages"),i=l("router-view"),p=l("UserScrollTop"),S=l("UserFooter");return c(),u(y,null,[a(r),t("div",fs,[a(f),a(i)]),a(p),a(S)],64)}const Us=v(bs,[["render",_s]]);export{Us as default};
