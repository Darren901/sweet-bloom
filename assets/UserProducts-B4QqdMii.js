import{U}from"./UserBanner-DlkCOrLg.js";import{U as P}from"./UserCouponModal-C-DVPEez.js";import{U as x}from"./UserProductCard-CV5I1hhi.js";import{_,o as e,c as r,b as t,d as g,F as l,j as f,t as $,a,k,r as i}from"./index-OUnoddX9.js";import{p as w}from"./product-service-BetaCwm8.js";import"./modalMixins-CEAkSbDU.js";import"./component-functions-Tkz_Vtvg.js";import"./cartStore-qvkz1KpD.js";import"./statusStore-CQweSoMn.js";import"./favoritesStore-s-6Ta0wX.js";const M={props:{categories:{type:Array,default:()=>[]}}},b={class:"sticky-top"},B={class:"list-group"},L={class:"list-group-item p-3"},D=["onClick"],A={class:"text-secondary"};function V(o,s,u,h,c,d){return e(),r("div",b,[s[2]||(s[2]=t("h4",{class:"text-primary"},"商品分類",-1)),s[3]||(s[3]=t("hr",null,null,-1)),t("ul",B,[t("li",L,[t("a",{href:"",class:"text-decoration-none d-block",onClick:s[0]||(s[0]=g(n=>o.$emit("change-category","all"),["prevent"]))},s[1]||(s[1]=[t("span",{class:"text-secondary"},"糖漾全系列",-1)]))]),(e(!0),r(l,null,f(u.categories,n=>(e(),r("li",{key:n,class:"list-group-item p-3"},[t("a",{href:"",class:"text-decoration-none d-block",onClick:g(p=>o.$emit("change-category",n),["prevent"])},[t("span",A,$(n),1)],8,D)]))),128))])])}const H=_(M,[["render",V],["__scopeId","data-v-a7da1ce3"]]),N={components:{UserBanner:U,UserProductCategories:H,UserProductCard:x,UserCouponModal:P},data(){return{products:[],originalProducts:[],isLoading:!1}},methods:{async getProducts(){this.isLoading=!0;try{let o=await w.getAllProducts();this.products=o.data.products,this.originalProducts=o.data.products}catch(o){console.log(o)}finally{this.isLoading=!1}},changeCategory(o){o==="all"?this.products=[...this.originalProducts]:this.products=this.originalProducts.filter(s=>s.category===o)}},computed:{categories(){return[...new Set(this.originalProducts.map(o=>o.category))]}},async created(){await this.getProducts()},mounted(){this.$refs.couponModal.showModal()}},S={class:"container mt-md-5 mt-3 mb-5"},j={class:"row"},F={class:"col-md-3"},G={class:"col-md-9 mt-md-5 mt-3"},I={class:"row"},q={key:0,class:"col-12 text-center"};function E(o,s,u,h,c,d){const n=i("Loading"),p=i("UserCouponModal"),y=i("UserBanner"),C=i("UserProductCategories"),v=i("UserProductCard");return e(),r(l,null,[a(n,{active:c.isLoading},null,8,["active"]),a(p,{ref:"couponModal",class:"bounce"},null,512),t("div",null,[a(y,{title:"所有商品","image-url":"https://images.unsplash.com/photo-1514077583608-aedd9ec18c40?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}),t("div",S,[t("div",j,[t("div",F,[a(C,{categories:d.categories,onChangeCategory:d.changeCategory},null,8,["categories","onChangeCategory"])]),t("div",G,[t("div",I,[c.products.length===0?(e(),r("div",q,s[0]||(s[0]=[t("h3",null,"此分類暫無商品",-1)]))):k("",!0),(e(!0),r(l,null,f(c.products,m=>(e(),r("div",{key:m.id,class:"col-md-4"},[a(v,{product:m},null,8,["product"])]))),128))])])])])])],64)}const Z=_(N,[["render",E],["__scopeId","data-v-a1bff439"]]);export{Z as default};
