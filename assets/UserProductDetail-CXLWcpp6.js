import{_ as f,o as d,c,h as T,m,l as h,a as l,b as s,e as v,t as i,d as a,w as P,v as C,n as k,k as g,f as p,F as L,r as n}from"./index-CPswxAJw.js";import{U as I}from"./UserProductSwiper-DxG5lbSs.js";import{p as S}from"./product-service-X5DravFr.js";import{s as U}from"./statusStore-DTCKUx_j.js";import{c as N}from"./cartStore-C1M26ZQl.js";import{f as y}from"./favoritesStore-BUe9S8Rj.js";import"./navigation-DjrSZsd1.js";const q={},F={class:"accordion mt-4",id:"purchaseInfo"};function V(e,t){return d(),c("div",F,t[0]||(t[0]=[T('<div class="accordion-item mb-3"><h2 class="accordion-header" id="headingOne"><button class="accordion-button bg-secondary text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"><span class="fs-5">商品保存方式</span></button></h2><div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#purchaseInfo"><div class="accordion-body"><ul class="list-unstyled"><li>🌡️ 冷藏保存：請將商品保存於 4-7°C 的環境中</li><li>⏰ 最佳賞味期：商品製作完成後 2 日內食用完畢</li><li>❌ 請勿冷凍，以免影響口感</li><li>☀️ 避免陽光直射，請盡快冷藏保存</li></ul></div></div></div><div class="accordion-item mb-3"><h2 class="accordion-header" id="headingTwo"><button class="accordion-button collapsed bg-secondary text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo"><span class="fs-5">配送資訊</span></button></h2><div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#purchaseInfo"><div class="accordion-body"><ul class="list-unstyled"><li>🚚 配送方式：冷藏宅配</li><li>📦 配送時間：週一至週五 09:00-18:00</li><li>💰 運費資訊：單筆訂單滿 NT$1,000 免運費</li><li>⚠️ 因蛋糕屬於保存期限較短的商品，恕不接受退換貨</li></ul></div></div></div><div class="accordion-item mb-3"><h2 class="accordion-header" id="headingThree"><button class="accordion-button collapsed bg-secondary text-light" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree"><span class="fs-5">訂購須知</span></button></h2><div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#purchaseInfo"><div class="accordion-body"><ul class="list-unstyled"><li>📅 請提前 3 天預訂</li><li>💳 付款方式：信用卡、LINE Pay</li><li>🎂 可接受客製化蛋糕預訂，請提前 7 天聯繫</li><li>📞 如需更改訂單，請於出貨前 24 小時聯繫客服</li><li>🎯 實際商品依現場製作為主，圖片僅供參考</li></ul></div></div></div>',3)]))}const O=f(q,[["render",V]]),A={data(){return{product:{},isLoading:!1,qty:1}},computed:{...m(U,["cartLoadingItem"]),...m(y,["favorites"]),isFavorite(){return this.favorites.some(e=>e.id===this.product.id)}},components:{UserProductAccordion:O,UserProductSwiper:I},methods:{...h(N,["addToCart"]),...h(y,["toggleFavorite"]),async getProduct(){this.isLoading=!0;const e=this.$route.params.productId;try{let t=await S.getProduct(e);this.product=t.data.product}catch(t){console.log(t)}finally{this.isLoading=!1}},changeProduct(e){this.product=e,this.$router.push(`/user/product/${e.id}`),window.scrollTo({top:0,behavior:"smooth"})}},created(){this.getProduct()}},B={key:0,class:"container"},D={class:"mt-5 ps-1"},j={"aria-label":"breadcrumb "},E={class:"breadcrumb"},M={class:"breadcrumb-item"},z={class:"breadcrumb-item"},$={class:"row"},G={class:"col-md-6 pb-5 px-3"},H=["src"],J={class:"col-md-6 text-start px-3"},K={class:"text-muted"},Q={class:"fs-5 text-primary"},R={class:"d-flex justify-content-between mb-3"},W={class:"fs-6"},X={class:"fs-3"},Y={class:"row mt-5"},Z={class:"col-6"},tt={class:"input-group mb-3"},st=["disabled"],ot={class:"col-6"},et=["disabled"],it={key:0,class:"spinner-border text-light spinner-border-sm me-1",role:"status"},rt={class:"row py-5"},lt={class:"col-md-8"};function at(e,t,nt,dt,o,u){const _=n("Loading"),b=n("router-link"),x=n("UserProductAccordion"),w=n("UserProductSwiper");return d(),c(L,null,[l(_,{active:o.isLoading},null,8,["active"]),o.product?(d(),c("div",B,[s("div",D,[s("nav",j,[s("ol",E,[s("li",M,[l(b,{class:"text-decoration-none text-primary",to:"/user/index"},{default:v(()=>t[5]||(t[5]=[p("首頁")])),_:1})]),s("li",z,[l(b,{to:"/user/products",class:"text-decoration-none text-primary"},{default:v(()=>t[6]||(t[6]=[p("所有商品")])),_:1})]),t[7]||(t[7]=s("li",{class:"breadcrumb-item active text-secondary","aria-current":"page"},"產品資訊",-1))])])]),s("div",$,[s("div",G,[s("img",{src:o.product.imageUrl,class:"img-fluid rounded",style:{height:"400px",width:"600px","object-fit":"cover"}},null,8,H)]),s("div",J,[s("h2",null,i(o.product.title),1),t[12]||(t[12]=s("hr",null,null,-1)),s("p",K,i(o.product.category),1),s("p",null,i(o.product.description),1),s("p",Q,i(o.product.content),1),s("div",R,[s("del",W,"原價: NT$"+i(this.$filters.currency(o.product.origin_price)),1),s("span",X,"NT$"+i(this.$filters.currency(o.product.price)),1)]),s("div",Y,[s("div",Z,[s("div",tt,[s("button",{class:"btn btn-outline-primary",disabled:o.qty<=1,type:"button",id:"button-addon1",onClick:t[0]||(t[0]=a(r=>this.qty--,["prevent"]))},t[8]||(t[8]=[s("i",{class:"bi bi-dash"},null,-1)]),8,st),P(s("input",{type:"text",class:"form-control border-primary text-center bg-light text-primary shadow-none",value:"1",placeholder:"","onUpdate:modelValue":t[1]||(t[1]=r=>o.qty=r)},null,512),[[C,o.qty]]),s("button",{class:"btn btn-outline-primary",type:"button",id:"button-addon1",onClick:t[2]||(t[2]=a(r=>this.qty++,["prevent"]))},t[9]||(t[9]=[s("i",{class:"bi bi-plus"},null,-1)]))])]),s("div",ot,[s("a",{href:"#",class:"text-primary float-end",onClick:t[3]||(t[3]=a(r=>e.toggleFavorite(o.product),["stop"]))},[s("i",{class:k(u.isFavorite?"bi-heart-fill fs-4":"bi-heart fs-4")},null,2)])])]),s("button",{class:"btn btn-primary w-100 text-light",disabled:e.cartLoadingItem===o.product.id,onClick:t[4]||(t[4]=a(r=>e.addToCart(o.product.id,this.qty),["prevent","stop"]))},[e.cartLoadingItem===o.product.id?(d(),c("div",it,t[10]||(t[10]=[s("span",{class:"visually-hidden"},"Loading...",-1)]))):g("",!0),t[11]||(t[11]=p(" 加入購物車 "))],8,et)])]),t[15]||(t[15]=s("hr",null,null,-1)),s("div",rt,[s("div",lt,[t[13]||(t[13]=s("h3",{class:"mb-4 text-secondary"},"購買須知",-1)),t[14]||(t[14]=s("hr",{class:"text-secondary"},null,-1)),l(x)])])])):g("",!0),l(w,{onChangeProduct:u.changeProduct},null,8,["onChangeProduct"])],64)}const gt=f(A,[["render",at],["__scopeId","data-v-34d51fd0"]]);export{gt as default};
