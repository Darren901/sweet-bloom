import{y as s,z as n}from"./index-OUnoddX9.js";import{s as i}from"./statusStore-CQweSoMn.js";import{c}from"./cartStore-qvkz1KpD.js";const o="https://vue3-course-api.hexschool.io/api/darrenapi";class l{sendOrder(r,a){return s.post(`${o}/order`,{data:{user:r,message:a}})}getOrder(r){return s.get(`${o}/order/${r}`)}payOrder(r){return s.post(`${o}/pay/${r}`)}}const d=new l,t=i(),p=c(),O=n("orderStore",{state(){return{order:{products:[],is_paid:!1,user:{name:"",email:"",address:"",tel:""}}}},actions:{async sendOrder(e,r){t.isLoading=!0;try{let a=await d.sendOrder(e,r);return await p.getCart(),a}catch(a){console.log(a)}finally{t.isLoading=!1}},async getOrder(e){try{t.isLoading=!0;let r=await d.getOrder(e);return this.order=r.data.order,r}catch(r){console.log(r)}finally{t.isLoading=!1}},async payOrder(e){t.cartLoadingItem=e;try{let r=await d.payOrder(e);t.httpMessageState(r,"付款"),await this.getOrder(e)}catch(r){console.log(r)}finally{t.cartLoadingItem=""}}}});export{O as o};
