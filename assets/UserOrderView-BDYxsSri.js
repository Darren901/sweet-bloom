import{U as A}from"./UserBanner-DlkCOrLg.js";import{_ as O,o as r,c as o,F as P,j as M,b as t,t as d,k as p,l as S,m as T,a as c,d as F,f as j,x as H,e as q,r as m}from"./index-OUnoddX9.js";import{o as C}from"./orderStore-ePlaS8CZ.js";import{s as E}from"./statusStore-CQweSoMn.js";import"./cartStore-qvkz1KpD.js";const G={props:{order:{type:Object,default:()=>({products:[],total:0})}},methods:{formatPrice(s){return s?this.$filters.currency(Number(s).toFixed(0)):"0"}}},W={key:0,class:"border p-4 mb-4"},Y=["src"],z={class:"w-100"},J={class:"d-flex justify-content-between"},K={class:"mb-0 fw-bold text-secondary"},Q={class:"mb-0"},R={key:0},X={class:"mb-0 text-muted"},Z={class:"mb-0 text-success"},tt={key:1,class:"mb-0"},et={class:"d-flex justify-content-between mt-4"},st={class:"mb-0 h4 fw-bold"};function rt(s,e,a,V,D,n){var i,u;return(i=a.order)!=null&&i.products?(r(),o("div",W,[(r(!0),o(P,null,M(a.order.products,l=>(r(),o("div",{class:"d-flex mb-3",key:l.id},[t("img",{src:l.product.imageUrl,alt:"",class:"me-2",style:{width:"100px",height:"70px","object-fit":"cover",overflow:"hidden"}},null,8,Y),t("div",z,[t("div",J,[t("div",null,[t("p",K,d(l.product.title),1),t("p",Q,"數量: "+d(l.qty)+" "+d(l.product.unit),1)]),l.coupon?(r(),o("div",R,[t("del",X,"NT$"+d(n.formatPrice(l.total)),1),t("p",Z,"NT$"+d(n.formatPrice(l.final_total)),1)])):(r(),o("p",tt,"NT$"+d(n.formatPrice(l.total)),1))])])]))),128)),e[1]||(e[1]=t("table",{class:"table mt-4 border-top border-bottom text-muted"},[t("tbody",null,[t("tr",null,[t("th",{class:"border-0 px-0"},"付款方式"),t("td",{class:"text-end border-0 px-0"},"ApplePay")])])],-1)),t("div",et,[e[0]||(e[0]=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1)),t("p",st,"NT$"+d(n.formatPrice((u=a.order)==null?void 0:u.total)),1)])])):p("",!0)}const ot=O(G,[["render",rt]]),dt={methods:{...S(C,["getOrder","payOrder"])},computed:{...T(E,["isLoading","cartLoadingItem"]),...T(C,["order"])},async created(){await this.getOrder(this.$route.params.orderId)},components:{UserBanner:A,UserCheckTable2:ot}},lt={key:0,class:"container mt-md-5 mt-3 mb-3"},nt={class:"row flex-row justify-content-center p-3 g-md-5 g-3"},at={class:"col-md-5"},it={key:0,class:"text-start text-dark"},ut={key:1,class:"text-start text-dark"},mt={class:"col-md-6"},pt={class:"table border-top"},ct={class:"text-secondary"},bt={key:0,class:"text-success"},ft={key:1,class:"text-danger"},yt={class:"table border-top"},ht={key:0},_t=["disabled"],kt={key:0,class:"spinner-border text-primary spinner-border-sm me-1",role:"status"};function gt(s,e,a,V,D,n){var b,f,y,h,_,k,g,$,v,w,x,U,B,L;const i=m("Loading"),u=m("UserBanner"),l=m("UserCheckTable2"),I=m("router-link");return r(),o(P,null,[c(i,{active:s.isLoading},null,8,["active"]),c(u,{title:"訂單詳細",imageUrl:"https://images.unsplash.com/photo-1519340333755-56e9c1d04579?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}),s.order?(r(),o("div",lt,[t("div",nt,[t("div",at,[(b=s.order)!=null&&b.is_paid?(r(),o("h5",ut,"訂單已完成")):(r(),o("h5",it,"訂單已送出")),c(l,{order:s.order},null,8,["order"])]),t("div",mt,[e[12]||(e[12]=t("h5",{class:"text-start text-dark"},"訂單資訊",-1)),t("table",pt,[t("tbody",null,[t("tr",null,[e[1]||(e[1]=t("th",null,"訂購日期",-1)),t("td",null,d(this.$filters.date((f=s.order)==null?void 0:f.create_at)),1)]),t("tr",null,[e[2]||(e[2]=t("th",null,"訂單編號",-1)),t("td",ct,d((y=s.order)==null?void 0:y.id),1)]),t("tr",null,[e[3]||(e[3]=t("th",null,"付款狀態",-1)),(h=s.order)!=null&&h.is_paid?(r(),o("td",bt,"付款完成")):(r(),o("td",ft,"待付款"))])])]),e[13]||(e[13]=t("h5",{class:"text-start text-dark"},"訂購人資訊",-1)),t("table",yt,[t("tbody",null,[t("tr",null,[e[4]||(e[4]=t("th",null,"姓名",-1)),t("td",null,d((_=s.order)==null?void 0:_.user.name),1)]),t("tr",null,[e[5]||(e[5]=t("th",null,"Email",-1)),t("td",null,d((k=s.order)==null?void 0:k.user.email),1)]),t("tr",null,[e[6]||(e[6]=t("th",null,"地址",-1)),t("td",null,d((g=s.order)==null?void 0:g.user.address),1)]),t("tr",null,[e[7]||(e[7]=t("th",null,"電話",-1)),t("td",null,d(($=s.order)==null?void 0:$.user.tel),1)]),(v=s.order)!=null&&v.message?(r(),o("tr",ht,[e[8]||(e[8]=t("th",null,"備註",-1)),t("td",null,d((w=s.order)==null?void 0:w.message),1)])):p("",!0)])]),(x=s.order)!=null&&x.is_paid?(r(),H(I,{key:1,to:"/user/index",class:"btn btn-primary w-100 text-light"},{default:q(()=>e[11]||(e[11]=[j("回到首頁")])),_:1})):(r(),o("button",{key:0,class:"btn btn-outline-primary w-100",type:"button",onClick:e[0]||(e[0]=F($t=>{var N;return s.payOrder((N=s.order)==null?void 0:N.id)},["prevent"])),disabled:s.cartLoadingItem===((U=s.order)==null?void 0:U.id)||!((B=s.order)!=null&&B.user.name)},[s.cartLoadingItem===((L=s.order)==null?void 0:L.id)?(r(),o("div",kt,e[9]||(e[9]=[t("span",{class:"visually-hidden"},"Loading...",-1)]))):p("",!0),e[10]||(e[10]=j(" 前往付款 "))],8,_t))])])])):p("",!0)],64)}const Lt=O(dt,[["render",gt],["__scopeId","data-v-5ae72ff7"]]);export{Lt as default};
